package eu.trentorise.game.model

import eu.trentorise.game.core.Utility;
global Utility utils;

rule "reward completing first group challenge"
when
	$challenge : ChallengeConcept(modelName == "incentiveGroupChallengeReward", 
								$bonusScore: fields["bonusScore"], 
								$bonusPointType : fields["bonusPointType"],
								isCompleted() != true)
    $reward : Reward() 
    $pcBonus : PointConcept(name == (String) $bonusPointType)

then

	utils.log('incentiveGroupChallengeReward COMPLETED');
	$challenge.completed();
	double newScore = $pcBonus.getScore() + (Double) $bonusScore;
	modify($pcBonus) { setScore(newScore) };
	update($challenge);

end
